<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Aurora Portal - Ethical Intelligence Network</title>
    <meta name="description" content="Aurora Portal - Building the future through ethical intelligence and decentralized collaboration">
    <style>
      :root{
        --bg1:#03151a;
        --bg2:#062e33;
        --panel:#0e1b20cc;
        --accent:#0dc7bd;
        --text:#e7f7f6;
        --muted:#b9d8d6;
      }
      body{
        margin:0; font-family:Inter,Segoe UI,Roboto,Arial,Helvetica,sans-serif; color:var(--text);
        min-height:100vh; display:grid; place-items:center; overflow:hidden;
        background: radial-gradient(80vmax 80vmax at 10% 10%, #0a3a42 0%, transparent 60%),
                    radial-gradient(70vmax 70vmax at 90% 90%, #0b5a57 0%, transparent 55%),
                    linear-gradient(160deg, var(--bg1), var(--bg2));
      }
      .orbs::before, .orbs::after{
        content:""; position:absolute; border-radius:50%; filter:blur(40px); opacity:.25; pointer-events:none;
      }
      .orbs::before{ width:420px; height:420px; background:#10dbcff0; left:-120px; top:-120px; }
      .orbs::after{ width:520px; height:520px; background:#0aa2a7f0; right:-160px; bottom:-160px; }
      .wrap{ position:relative; width:min(960px,92vw); padding:32px; }
      .card{
        position:relative; margin:auto; text-align:center; padding:34px 38px;
        background:linear-gradient(180deg, #102329cc, #0b1a1fcc);
        border:1px solid rgba(255,255,255,.06); border-radius:16px;
        box-shadow:0 16px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
        backdrop-filter: blur(10px);
      }
      img.logo{ max-width:220px; height:auto; display:block; margin:0 auto 18px; filter: drop-shadow(0 6px 20px rgba(0,0,0,.35)); }
      h1{ margin:0; font-size:36px; letter-spacing:.4px; color:var(--text); }
      p.lead{ margin:10px 0 0; font-size:18px; color:var(--muted); }
      .divider{ width:72px; height:2px; margin:18px auto 0; background:linear-gradient(90deg, transparent, var(--accent), transparent); opacity:.9; }
      .status{ margin:16px 0 8px; padding:8px 14px; border-radius:6px; font-size:13px; font-weight:500; }
      .status.info{ background:#1a3a4280; color:var(--accent); }
      .status.success{ background:#0a3a2280; color:#10db9f; }
      .status.error{ background:#3a1a1a80; color:#ff6b6b; }
      .info-row{ display:flex; gap:20px; justify-content:center; margin:12px 0; font-size:13px; color:var(--muted); }
      .info-item{ display:flex; align-items:center; gap:6px; }
      .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); animation:pulse 2s ease-in-out infinite; }
      @keyframes pulse{ 0%,100%{opacity:.5} 50%{opacity:1} }
      button:hover{ transform: translateY(-2px); }
      button:active{ transform: translateY(0); }
      footer{ margin-top:18px; font-size:12px; color:#9ec1be; opacity:.8 }
      @media(min-width:720px){ h1{font-size:42px} img.logo{max-width:260px} }
    </style>
  </head>
  <body>
    <div class="wrap orbs">
      <main class="card">
        <img class="logo" src="assets/aurora-portal-logo.png" alt="Aurora Portal logo" />
        <h1>Aurora Portal</h1>
        <div class="divider"></div>
        <p class="lead">Building the future.</p>
        
        <!-- Status indicator -->
        <div id="status" class="status info">Initializing Aurora Intelligence System...</div>
        
        <!-- Toggle button for identity section (hidden until identity is created) -->
        <div style="margin: 16px auto; text-align: center;">
          <button id="btn-toggle-identity" style="display: none; padding: 10px 20px; background: rgba(10,199,189,0.1); color: var(--accent); border: 1px solid rgba(10,199,189,0.3); border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; transition: all 0.2s;">
            üîê Show Identity Details
          </button>
        </div>
        
        <!-- Identity type selector (shown on first load) -->
        <div id="identity-selector" style="display:none; margin: 16px auto; padding: 20px; background: rgba(10, 199, 189, 0.05); border: 1px solid rgba(10, 199, 189, 0.2); border-radius: 8px; max-width: 600px;">
          <div style="font-size: 16px; color: var(--text); font-weight: 600; margin-bottom: 12px; text-align: center;">
            Choose Your Identity Method
          </div>
          <div style="display: grid; gap: 12px; margin-top: 16px;">
            <button id="btn-use-passkey" style="padding: 16px; background: linear-gradient(135deg, #0dc7bd, #0aa2a7); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px; text-align: left; transition: transform 0.2s;">
              <div style="font-size: 24px; margin-bottom: 4px;">üîê</div>
              <div style="font-weight: 700; margin-bottom: 4px;">Passkey (Recommended)</div>
              <div style="font-size: 12px; opacity: 0.9;">Hardware-backed security. Stored in your system (Windows Hello, Touch ID, etc). Never lost, ultra secure.</div>
            </button>
            <button id="btn-use-localkey" style="padding: 16px; background: rgba(255,255,255,0.05); color: var(--text); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px; text-align: left; transition: transform 0.2s;">
              <div style="font-size: 24px; margin-bottom: 4px;">üîë</div>
              <div style="font-weight: 700; margin-bottom: 4px;">Browser Storage (Simple)</div>
              <div style="font-size: 12px; opacity: 0.7;">‚ö†Ô∏è Stored in browser only. Can be lost if you clear data. Good for testing.</div>
            </button>
          </div>
        </div>
        
        <!-- Identity panel -->
        <div id="identity-panel" style="display:none; margin: 16px auto; padding: 16px; background: rgba(10, 199, 189, 0.05); border: 1px solid rgba(10, 199, 189, 0.2); border-radius: 8px; max-width: 600px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <div style="font-size: 14px; color: var(--accent); font-weight: 600;">
              üîê Decentralized Identity
            </div>
            <div id="identity-type-badge" style="padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 600; background: rgba(255,255,255,0.1); color: var(--muted);">
              LocalKey
            </div>
          </div>
          <div style="font-size: 12px; color: var(--muted); margin-bottom: 12px;" id="identity-description">
            Your identity is stored locally in your browser. No external services required.
          </div>
          <div style="text-align: left; font-size: 12px; line-height: 1.6;">
            <div style="margin-bottom: 8px;">
              <strong style="color: var(--text);">DID:</strong><br>
              <code id="did-full" style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; display: inline-block; margin-top: 4px; word-break: break-all; color: var(--accent);">-</code>
            </div>
            <div style="margin-bottom: 12px;">
              <strong style="color: var(--text);">Algorithm:</strong> ECDSA P-256 (NIST standard)
            </div>
          </div>
          
          <!-- Action buttons -->
          <div style="display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; justify-content: center;">
            <button id="btn-sign-test" style="padding: 8px 16px; background: var(--accent); color: var(--bg1); border: none; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; transition: transform 0.2s;">
              üñäÔ∏è Test Signature
            </button>
            <button id="btn-export-identity" style="padding: 8px 16px; background: rgba(255,255,255,0.1); color: var(--text); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; transition: transform 0.2s;">
              üì• Export Backup
            </button>
            <button id="btn-import-identity" style="padding: 8px 16px; background: rgba(10,199,189,0.2); color: var(--accent); border: 1px solid rgba(10,199,189,0.3); border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; transition: transform 0.2s;">
              üì§ Import Backup
            </button>
            <button id="btn-reset-identity" style="padding: 8px 16px; background: rgba(255,107,107,0.2); color: #ff6b6b; border: 1px solid rgba(255,107,107,0.3); border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; transition: transform 0.2s;">
              üóëÔ∏è Reset
            </button>
          </div>
        </div>
        
        <!-- Agent info -->
        <div class="info-row">
          <div class="info-item">
            <span class="dot"></span>
            <span>P2P: <strong id="peer-count">0</strong> peers</span>
          </div>
          <div class="info-item">
            <span>Type: <strong id="identity-type">-</strong></span>
          </div>
        </div>
        
        <footer>¬© <span id="y"></span> Aurora Program | v1.1.0</footer>
      </main>
    </div>
    
    <!-- Load Aurora WASM Client -->
    <script type="module" src="js/aurora-portal.js?v=3"></script>
    <script>document.getElementById('y').textContent=new Date().getFullYear()</script>
  </body>
</html>
